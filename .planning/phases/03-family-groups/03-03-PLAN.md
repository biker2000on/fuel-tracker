---
phase: 03-family-groups
plan: 03
type: execute
depends_on: ["03-02"]
files_modified: [src/app/groups/page.tsx, src/app/groups/new/page.tsx, src/app/groups/join/page.tsx, src/app/page.tsx]
---

<objective>
Create UI for group management and display group context in app.

Purpose: Enable users to create, view, and join groups through the interface.
Output: Groups page with list/create/join functionality, home page shows user's groups.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./03-03-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-family-groups/03-01-SUMMARY.md
@.planning/phases/03-family-groups/03-02-SUMMARY.md
@src/app/page.tsx
@src/components/AuthStatus.tsx

**Tech stack available:**
- Group API: GET /api/groups, POST /api/groups, POST /api/groups/join
- Auth.js v5 session
- Tailwind CSS

**Constraining decisions:**
- 03-01: Groups API returns groups with role and memberCount
- 03-02: Create returns inviteCode, join uses inviteCode
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create groups management pages</name>
  <files>src/app/groups/page.tsx, src/app/groups/new/page.tsx, src/app/groups/join/page.tsx</files>
  <action>
    Create src/app/groups/page.tsx (groups list):
    - "use client" directive
    - Fetch groups from GET /api/groups on mount
    - Display list of groups with name, role badge (Owner/Member), member count
    - Show invite code for owned groups (with copy button)
    - "Create Group" button linking to /groups/new
    - "Join Group" button linking to /groups/join
    - Empty state: "No groups yet. Create or join a family group to share vehicles."
    - Mobile-first Tailwind styling

    Create src/app/groups/new/page.tsx (create group):
    - "use client" directive
    - Form with group name input
    - Submit POSTs to /api/groups
    - On success: show created group with invite code
    - "Share this code with family members: ABC12DEF"
    - Copy code button
    - "Done" button returns to /groups
    - Error handling for invalid name

    Create src/app/groups/join/page.tsx (join group):
    - "use client" directive
    - Form with invite code input (uppercase, 8 chars)
    - Auto-uppercase input as user types
    - Submit POSTs to /api/groups/join
    - On success: redirect to /groups with success message
    - Error handling: invalid code (404), already member (409)
    - "Cancel" button returns to /groups

    Styling: Clean, mobile-first. Cards for groups. Consistent with auth pages.
  </action>
  <verify>Visit /groups, create a group, copy invite code, log out, create new user, join group with code</verify>
  <done>Groups pages work: list shows groups, create generates code, join accepts code.</done>
</task>

<task type="auto">
  <name>Task 2: Update home page to show user's groups</name>
  <files>src/app/page.tsx</files>
  <action>
    Update home page to show groups context:

    1. Fetch user's groups on mount (GET /api/groups)
    2. Display groups section below welcome message:
       - "Your Groups" heading
       - List of group names with member counts
       - Link to /groups for management
    3. If no groups: "Join or create a family group to share vehicles"
    4. Add navigation: Link to /groups in the UI

    The home page should now show:
    - Welcome message with user name
    - Sign out button (existing)
    - Groups section with links
    - Placeholder for vehicles (coming in Phase 4)

    Keep layout simple - this is the foundation for the dashboard that will show vehicles and recent fillups later.
  </action>
  <verify>Log in, visit /, see groups section. Create group, refresh, see it listed.</verify>
  <done>Home page shows user's groups with links to group management.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] /groups lists user's groups
- [ ] /groups/new creates group and shows invite code
- [ ] /groups/join joins group via code
- [ ] Home page shows groups section
- [ ] Full flow works: create group, get code, new user joins
</verification>

<success_criteria>

- Groups list page functional
- Create group with invite code display
- Join group via code works
- Home page shows groups context
- Phase 3 complete - ready for vehicle management
</success_criteria>

<output>
After completion, create `.planning/phases/03-family-groups/03-03-SUMMARY.md`
</output>
