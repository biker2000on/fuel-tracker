---
phase: 11-pwa-offline
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/profile/page.tsx
  - src/components/InstallButton.tsx
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "User can access profile page from bottom nav"
    - "User sees install button on profile page (when installable)"
    - "User can tap install button to trigger browser install prompt"
    - "Already installed users see 'Installed' status instead of button"
  artifacts:
    - path: "src/app/profile/page.tsx"
      provides: "Profile page with install section"
      min_lines: 50
    - path: "src/components/InstallButton.tsx"
      provides: "Reusable install button component"
      exports: ["InstallButton"]
  key_links:
    - from: "src/app/profile/page.tsx"
      to: "src/components/InstallButton.tsx"
      via: "component import"
      pattern: "import.*InstallButton"
    - from: "src/components/InstallButton.tsx"
      to: "src/hooks/useInstallPrompt.ts"
      via: "hook usage"
      pattern: "useInstallPrompt"
---

<objective>
Create profile page with PWA install button

Purpose: Move install experience from floating banner to dedicated profile page per user decision. The profile page will be the home for app settings including install, and later theme preference and account management.

Output: Profile page accessible from bottom nav with working PWA install button
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-pwa-offline/11-CONTEXT.md
@.planning/phases/11-pwa-offline/11-RESEARCH.md

# Key existing files
@src/hooks/useInstallPrompt.ts
@src/components/InstallPrompt.tsx
@src/components/BottomNav.tsx
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create InstallButton component</name>
  <files>src/components/InstallButton.tsx</files>
  <action>
Create a new InstallButton component that:
1. Uses existing `useInstallPrompt` hook
2. Shows "Add to Home Screen" button with benefit text when installable (canInstall=true)
3. Shows "Installed" badge/status when already installed (isInstalled=true)
4. Shows nothing or disabled state when not installable (iOS Safari, desktop browsers without support)
5. Handles the install flow: calls promptInstall(), shows success toast on acceptance

Design:
- Full-width button style matching app design
- Green primary color for install action
- Include icon (download/plus icon)
- Benefit text: "Quick access at the pump"
- Success feedback: Brief toast or inline message

Use dark mode classes (dark:bg-*, dark:text-*) to match existing theme system.
  </action>
  <verify>Component file exists and exports InstallButton</verify>
  <done>InstallButton component renders install button when canInstall=true, shows installed status when isInstalled=true</done>
</task>

<task type="auto">
  <name>Task 2: Create profile page with install section</name>
  <files>src/app/profile/page.tsx</files>
  <action>
Create profile page at /profile that:
1. Requires authentication (redirect to /login if unauthenticated)
2. Shows page title "Profile" with back link
3. Includes "App" section with InstallButton component
4. Placeholder sections for future features:
   - "Account" section (show user email, greyed out edit options)
   - "Preferences" section (placeholder for theme toggle - already in bottom nav)

Layout:
- Match existing page styling (bg-gradient, max-w-md, padding)
- Card-based sections with white/dark backgrounds
- Responsive and mobile-first

Note: This is a minimal profile page. Phase 13 will expand it with full account management.
  </action>
  <verify>Navigate to /profile, page loads with install section visible</verify>
  <done>Profile page exists at /profile, shows InstallButton in App section, requires auth</done>
</task>

<task type="auto">
  <name>Task 3: Remove floating InstallPrompt banner</name>
  <files>src/app/layout.tsx</files>
  <action>
Remove the InstallPrompt component from the root layout since install functionality has moved to profile page.

1. Remove the import: `import { InstallPrompt } from "@/components/InstallPrompt"`
2. Remove the `<InstallPrompt />` component from the JSX

Keep the InstallPrompt.tsx file for now (don't delete) in case we need to reference its logic, but it will no longer render.
  </action>
  <verify>Run `npm run build` - no errors. Visit app - no floating install banner appears</verify>
  <done>Floating install banner no longer appears, install moved to profile page</done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build`
2. Navigate to /profile from bottom nav - page loads
3. If browser supports PWA install: see "Add to Home Screen" button
4. If already installed: see "Installed" status
5. No floating install banner on any page
</verification>

<success_criteria>
- Profile page accessible at /profile
- InstallButton visible and functional on profile page
- Floating install banner removed from app
- Page follows existing design patterns and theme support
</success_criteria>

<output>
After completion, create `.planning/phases/11-pwa-offline/11-01-SUMMARY.md`
</output>
